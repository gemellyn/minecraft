---
title: "Analyse des données Minecraft"
output: html_document
---
```{r include = FALSE}
#install.packages("rmarkdown")
```


```{r include = FALSE}
#install.packages("data.table")
require(data.table)
```


```{r echo=FALSE}
#----------------------------------- configuration
file1 = "./log.bde"

#---------------------------------- fonctions

addVariables <- function(DTLoc,trace = FALSE,titre="noTitle"){
  
  #echec au lieu de succes pour diff c'est mieux
  DTLoc$perdant <- 1-DTLoc$gagnant;
  
 
  return (DTLoc)
}


lienTruc <- function(DTLoc,titre="title"){
  
  
    fit <- aov(erreurdiff ~ nbFail, data=DTLoc)
    plot(x=DTLoc$nbFail, y=DTLoc$erreurdiff, main=titre, xlab="Nombre d'échecs consécutifs", ylab="Erreur d'estimation de la difficulté")
    
  return(fit)
}

#---------------------------------- traitement


#on recup les données
dirs <- list.dirs(path = ".", full.names = TRUE, recursive = FALSE)
player_id <- 0
player_mod <- "modunknown"

DTActor <- data.table();

#On parse tous les dirs a la racine
for(d in dirs){
  #si on est sur un rep de datas, c'est un nouveau joueur
  if(grep("data",d) > 0){
    p <- player_id + 1;
    dirsPlayer <- list.dirs(path = d, full.names = TRUE, recursive = FALSE)
    #dans ce rep, on a des sous rep vanilla et mod avec les datas
    for(dp in dirsPlayer){
      is_result = FALSE;
      if(grep("vanilla",dp > 0)){
        player_mod = "vanilla"
        is_result = TRUE;
      }
      if(grep("mod",dp) > 0){
        player_mod = "mod"
        is_result = TRUE;
      }
      
      #si c'est un rep de data mod ou vanilla, on a les bonnes vars, on load
      if(is_result){
        DTActorLoc <- as.data.table(read.csv("actor.del",header=FALSE,sep=";"))
        DTActorLoc$MyPlayerId <- player_id
        DTActor
      }
    }
  }
    
}
csv.data 

#difficulte logique
DTL <- csv.data[which(csv.data$nom_du_jeu=="Logique2"),]
DTL <- as.data.table(DTL)
DTL <- addVariables(DTL,drawLogit,titre="Logique")

#creation de la table totale
DT <- data.table()
DT <- rbind(DT,DTL)


#lien erreur d'eval diff (exces confiance ?) et fails ou succes répétés
fit <- lienTruc(DT)
summary(fit)
```



